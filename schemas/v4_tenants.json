{
  "bsonType": "object",
  "title": "v4.1 Tenant Configuration (Multi-Cluster)",
  "required": ["tenantId", "name", "valid_domains", "api_config"],
  "properties": {
    "tenantId": {
      "bsonType": "string",
      "description": "Unique Organization ID (e.g., 'niyomilan')"
    },
    "name": {
      "bsonType": "string",
      "description": "Display Name"
    },
    "valid_domains": {
      "bsonType": "array",
      "description": "Whitelisted Logic Clusters for this tenant",
      "items": {
        "bsonType": "string",
        "description": "e.g., ['sales_cluster', 'support_cluster', 'logistics']"
      }
    },
    "api_config": {
      "bsonType": "object",
      "properties": {
        "shopify_url": { "bsonType": "string" },
        "erp_endpoint": { "bsonType": "string" }
      }
    },
    "tags": {
      "bsonType": "array",
      "description": "Routing flags (e.g., ['ECOM', 'D2C'])",
      "items": { "bsonType": "string" }
    },
    "active": { "bsonType": "bool" }
  }
}